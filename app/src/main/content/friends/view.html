<md-progress-linear ng-if="loading" md-mode="indeterminate"></md-progress-linear>

<div layout="row">
    <md-card flex offset-gt-md="25" flex-gt-md="50">

        <md-card-content ng-if="friends.length === 0 && !loading">
            <h1>{{ 'friends.no.friend.title' | translate }} :'(</h1>
            <p>{{ 'friends.no.friend.description' | translate }}</p>

            <md-button ui-sref="connect" class="md-raised md-primary" aria-label="{{'friends.no.friend.button' | translate}}">
                {{'friends.no.friend.button' | translate}}
            </md-button>
        </md-card-content>

        <md-card-content ng-if="friends.length > 0 && filteringFriends.length === 0 && !loading">
            <p>{{ 'friends.filter.no.friend.description' | translate }}</p>
        </md-card-content>

        <md-card-content ng-show="friends.length > 0 && filteringFriends.length > 0">

            <md-list class="friend-list">

                <md-list-item
                        layout="row"
                        ng-repeat="friend in friends | filter:{visibility:filter.visibility} | filter:{love:filter.love} | filter:filter.search | filter:{type:filter.type} | orderBy:'name' as filteringFriends track by friend.id">
                    <friend-preview friend="friend" flex>
                        <p>{{ friend.name }}</p>
                    </friend-preview>

                    <md-menu md-position-mode="target-right target" md-offset="0 -7">
                        <md-button aria-label="Open phone interactions menu" class="md-icon-button" ng-click="openMenu($mdOpenMenu, $event)">
                            <ng-md-icon flex="15" icon="more_vert" style="fill: pink" size="30"></ng-md-icon>
                        </md-button>
                        <md-menu-content width="2">
                            <md-menu-item ng-if="friend.visibility">
                                <md-button aria-label="{{'friends.list.menu.action.toggle.love' | translate}}" ng-click="toogleLove(friend)">
                                    <ng-md-icon icon="{{getLoveIcon(friend)}}" style="fill: pink" size="40"></ng-md-icon>
                                </md-button>
                            </md-menu-item>
                            <md-menu-item ng-if="!friend.love">
                                <md-button ng-disabled="friend.love" aria-label="{{'friends.list.menu.action.toggle.visibility' | translate}}" ng-click="toggleFriendVisibility(friend)">
                                    <ng-md-icon icon="{{friend.visibility ? 'visibility_off' : 'visibility'}}" style="fill: pink" size="40"></ng-md-icon>
                                </md-button>
                            </md-menu-item>
                        </md-menu-content>
                    </md-menu>
                </md-list-item>

                <md-list-item hide-gt-md></md-list-item>

            </md-list>
        </md-card-content>

        <md-button class="md-fab md-primary filter-btn" aria-label="{{'friends.filter.button' | translate}}" ng-click="showFilter($event)">
            <p><strong>{{filteringFriends.length}}</strong></p>
            <ng-md-icon icon="search" ng-style="{fill: 'white'}" size="30"></ng-md-icon>
        </md-button>

    </md-card>
</div>